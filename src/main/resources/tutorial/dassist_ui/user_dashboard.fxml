<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane fx:id="rootPane"
            fx:controller="controller.UserDashboardController"
            minHeight="720.0" minWidth="1024.0"
            prefHeight="800.0" prefWidth="1280.0"
            stylesheets="@style.css"
            xmlns="http://javafx.com/javafx/17.0.12"
            xmlns:fx="http://javafx.com/fxml/1">

    <!-- ================= TOP BAR ================= -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="top-bar">
            <children>
                <ImageView fitHeight="46.0" fitWidth="43.0" preserveRatio="true">
                    <image>
                        <Image url="@images/logo.png"/>
                    </image>
                </ImageView>

                <VBox spacing="0">
                    <Label text="D-Assist" styleClass="program-name"/>
                    <Label text="Your AI Diabetes Assistant" styleClass="tagline"/>
                </VBox>

                <Pane HBox.hgrow="ALWAYS"/>
                <Button text="Settings" styleClass="settings-button"/>
            </children>
            <padding>
                <Insets right="10"/>
            </padding>
        </HBox>
    </top>

    <!-- ================= LEFT SIDEBAR ================= -->
    <left>
        <ScrollPane fitToWidth="true">
            <content>
                <VBox spacing="14" styleClass="sidebar">

                    <!-- Tabs -->
                    <HBox alignment="CENTER" spacing="8">
                        <ToggleButton text="Chat"/>
                        <ToggleButton text="Bookmark"/>
                        <ToggleButton text="Calculator"/>
                    </HBox>

                    <!-- Search -->
                    <HBox spacing="8" styleClass="search-row">
                        <ImageView fitHeight="14" fitWidth="14">
                            <image>
                                <Image url="@../images/search.png"/>
                            </image>
                        </ImageView>
                        <TextField promptText="Search history"
                                   styleClass="search-field"
                                   HBox.hgrow="ALWAYS"/>
                    </HBox>

                    <!-- QUICK CATEGORIES -->
                    <VBox spacing="6">
                        <Label text="Quick categories" styleClass="sidebar-section-title"/>

                        <Button fx:id="prescriptionBtn"
                                text="drug prescription"
                                styleClass="category-btn"
                                onAction="#onPrescription"/>

                        <Button fx:id="usesBtn"
                                text="uses"
                                styleClass="category-btn"
                                onAction="#onUses"/>

                        <Button fx:id="dosagesBtn"
                                text="dosages"
                                styleClass="category-btn"
                                onAction="#onDosages"/>

                        <Button fx:id="sideEffectsBtn"
                                text="side effects"
                                styleClass="category-btn"
                                onAction="#onSideEffects"/>

                        <Button fx:id="interactionsBtn"
                                text="potential drug interactions"
                                styleClass="category-btn"
                                onAction="#onInteractions"/>

                        <Button fx:id="contraindicationsBtn"
                                text="contraindications"
                                styleClass="category-btn"
                                onAction="#onContraindications"/>
                    </VBox>

                    <!-- Chat History -->
                    <VBox spacing="10" styleClass="history-card">
                        <Label text="Chat history" styleClass="history-title"/>
                        <ListView fx:id="historyListView" prefHeight="200"/>
                    </VBox>

                    <Label text="© 2025 D-Assist"
                           styleClass="sidebar-footer"/>
                </VBox>
            </content>
        </ScrollPane>
    </left>

    <!-- ================= CENTER CONTENT ================= -->
    <center>
        <VBox fx:id="mainContent"
              alignment="TOP_CENTER"
              spacing="20">

            <!-- 标题 -->
            <Label fx:id="mainHeading"
                   text="What can I help with?"
                   styleClass="main-heading">
                <VBox.margin>
                    <Insets top="30"/>
                </VBox.margin>
            </Label>

            <!-- ASK BOX -->
            <HBox alignment="CENTER" spacing="6" styleClass="ask-container">
                <TextField fx:id="askField"
                           promptText="Ask anything"
                           styleClass="rounded-input"
                           HBox.hgrow="ALWAYS"/>

                <ImageView fx:id="sendIcon"
                           fitHeight="28"
                           fitWidth="28"
                           pickOnBounds="true"
                           onMouseClicked="#onSend"
                           styleClass="send-icon">
                    <image>
                        <Image url="@../images/send.png"/>
                    </image>
                </ImageView>
            </HBox>

            <!-- ===== 实例问题（Ask anything 下面）===== -->
            <VBox fx:id="exampleBox"
                  alignment="CENTER"
                  spacing="8">

                <Button text="What’s the starting dose of Metformin for Type 2 diabetes?"
                        styleClass="example-btn"
                        onAction="#example1"/>

                <Button text="What’s the maximum recommended dose of Jardiance?"
                        styleClass="example-btn"
                        onAction="#example2"/>

                <Button text="Does insulin dosage need adjustment in kidney disease?"
                        styleClass="example-btn"
                        onAction="#example3"/>

            </VBox>

            <!-- 动态 suggestions / 回答区域 -->
            <VBox fx:id="suggestionsBox"
                  alignment="CENTER"
                  spacing="6"/>

        </VBox>
    </center>

</BorderPane>
